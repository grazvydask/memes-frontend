{"ast":null,"code":"import _slicedToArray from \"/home/grazvydas/Downloads/memeFrontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/grazvydas/Downloads/memeFrontend/src/index.tsx\";\n// Import React, react-dom & dom-to-image-more\nimport * as React from 'react';\nimport { render } from 'react-dom';\nimport domtoimage from 'dom-to-image-more';\nimport axios from 'axios'; // Import components\n\nimport Content from './components/content';\nimport Form from './components/form';\nimport Result from './components/result'; // Import styles\n\nimport './styles/styles.css'; // App component\n\nfunction App() {\n  // Create refs\n  let contentContainerRef = React.useRef(null);\n  let resultContainerRef = React.useRef(null); // Create useState hooks\n\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        images = _React$useState2[0],\n        setImages = _React$useState2[1];\n\n  const _React$useState3 = React.useState(''),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        activeImage = _React$useState4[0],\n        setActiveImage = _React$useState4[1];\n\n  const _React$useState5 = React.useState(''),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        textTop = _React$useState6[0],\n        setTextTop = _React$useState6[1];\n\n  const _React$useState7 = React.useState(''),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        textBottom = _React$useState8[0],\n        setTextBottom = _React$useState8[1];\n\n  const _React$useState9 = React.useState(false),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        isMemeGenerated = _React$useState10[0],\n        setIsMemeGenerated = _React$useState10[1]; // Fetch images from https://api.imgflip.com/get_memes\n\n\n  async function fetchImage() {\n    // Get the memes\n    const imgData = await fetch('https://api.imgflip.com/get_memes').then(res => res.json()).catch(err => console.error(err));\n\n    const _ref = await imgData.data,\n          memes = _ref.memes; // Update images state\n\n\n    await setImages(memes); // Update activeImage state\n\n    await setActiveImage(memes[0].url);\n  } // Handle input elements\n\n\n  function handleInputChange(event) {\n    if (event.target.name === 'text-top') {\n      // Update textTop state\n      setTextTop(event.target.value);\n    } else {\n      // Update textBottom state\n      setTextBottom(event.target.value);\n    }\n  } // Choose random images from images fetched from api.imgflip.com\n\n\n  function handleImageChange() {\n    // Choose random image\n    const image = images[Math.floor(Math.random() * images.length)]; // Update activeImage state\n\n    setActiveImage(image.url);\n  } // Handle image upload via file input\n\n\n  function handleImageInputChange(event) {\n    // Update activeImage state\n    setActiveImage(window.URL.createObjectURL(event.target.files[0]));\n  } // Handle meme generation\n\n\n  function handleMemeGeneration() {\n    // Remove any existing images\n    if (resultContainerRef.current.childNodes.length > 0) {\n      resultContainerRef.current.removeChild(resultContainerRef.current.childNodes[0]);\n    } // Generate meme image from the content of 'content' div\n\n\n    domtoimage.toPng(contentContainerRef.current).then(dataUrl => {\n      // Create new image\n      const img = new Image(); // Use url of the generated image as src\n\n      img.src = dataUrl;\n      axios.post('http://localhost:3100/makememe', {\n        firstName: 'Finn',\n        lastName: 'Williams'\n      }).then(response => {\n        const returnedData = response.data;\n        console.log(returnedData);\n      }, error => {\n        console.log(error);\n      }); // Append new image to DOM\n\n      resultContainerRef.current.appendChild(img); // Update state for isMemeGenerated\n\n      setIsMemeGenerated(true);\n    });\n  } // Handle resetting the meme generator/removing existing pictures\n\n\n  function handleMemeReset() {\n    // Remove existing child node inside result container (generated meme image)\n    resultContainerRef.current.removeChild(resultContainerRef.current.childNodes[0]); // Update state for isMemeGenerated\n\n    setIsMemeGenerated(false);\n  } // Fetch images from https://api.imgflip.com/get_memes when app mounts\n\n\n  React.useEffect(() => {\n    // Call fetchImage method\n    fetchImage();\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(Form, {\n    textTop: textTop,\n    textBottom: textBottom,\n    handleImageInputChange: handleImageInputChange,\n    handleInputChange: handleInputChange,\n    handleImageChange: handleImageChange,\n    handleMemeGeneration: handleMemeGeneration,\n    handleMemeReset: handleMemeReset,\n    isMemeGenerated: isMemeGenerated,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }), React.createElement(Content, {\n    activeImage: activeImage,\n    contentContainerRef: contentContainerRef,\n    textBottom: textBottom,\n    textTop: textTop,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }), React.createElement(Result, {\n    resultContainerRef: resultContainerRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }));\n} // Render the App in the DOM\n\n\nconst rootElement = document.getElementById('root');\nrender(React.createElement(App, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 146\n  },\n  __self: this\n}), rootElement);","map":{"version":3,"sources":["/home/grazvydas/Downloads/memeFrontend/src/index.tsx"],"names":["React","render","domtoimage","axios","Content","Form","Result","App","contentContainerRef","useRef","resultContainerRef","useState","images","setImages","activeImage","setActiveImage","textTop","setTextTop","textBottom","setTextBottom","isMemeGenerated","setIsMemeGenerated","fetchImage","imgData","fetch","then","res","json","catch","err","console","error","data","memes","url","handleInputChange","event","target","name","value","handleImageChange","image","Math","floor","random","length","handleImageInputChange","window","URL","createObjectURL","files","handleMemeGeneration","current","childNodes","removeChild","toPng","dataUrl","img","Image","src","post","firstName","lastName","response","returnedData","log","appendChild","handleMemeReset","useEffect","rootElement","document","getElementById"],"mappings":"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","sourcesContent":["// Import React, react-dom & dom-to-image-more\nimport * as React from 'react'\nimport { render } from 'react-dom'\nimport domtoimage from 'dom-to-image-more'\nimport axios from 'axios';\n\n// Import components\nimport Content from './components/content'\nimport Form from './components/form'\nimport Result from './components/result'\n\n// Import styles\nimport './styles/styles.css'\n\n// App component\nfunction App() {\n  // Create refs\n  let contentContainerRef = React.useRef<HTMLElement | null>(null)\n  let resultContainerRef = React.useRef<HTMLElement | null>(null)\n\n  // Create useState hooks\n  const [images, setImages] = React.useState([])\n  const [activeImage, setActiveImage] = React.useState('')\n  const [textTop, setTextTop] = React.useState('')\n  const [textBottom, setTextBottom] = React.useState('')\n  const [isMemeGenerated, setIsMemeGenerated] = React.useState(false)\n\n  // Fetch images from https://api.imgflip.com/get_memes\n  async function fetchImage() {\n    // Get the memes\n    const imgData = await fetch('https://api.imgflip.com/get_memes').then(res => res.json()).catch(err => console.error(err))\n    const { memes } = await imgData.data\n\n    // Update images state\n    await setImages(memes)\n\n    // Update activeImage state\n    await setActiveImage(memes[0].url)\n  }\n\n  // Handle input elements\n  function handleInputChange(event) {\n    if (event.target.name === 'text-top') {\n      // Update textTop state\n      setTextTop(event.target.value)\n    } else {\n      // Update textBottom state\n      setTextBottom(event.target.value)\n    }\n  }\n\n  // Choose random images from images fetched from api.imgflip.com\n  function handleImageChange() {\n    // Choose random image\n    const image = images[Math.floor(Math.random() * images.length)]\n\n    // Update activeImage state\n    setActiveImage(image.url)\n  }\n\n  // Handle image upload via file input\n  function handleImageInputChange(event) {\n    // Update activeImage state\n    setActiveImage(window.URL.createObjectURL(event.target.files[0]))\n  }\n\n  // Handle meme generation\n  function handleMemeGeneration() {\n    // Remove any existing images\n    if (resultContainerRef.current.childNodes.length > 0) {\n      resultContainerRef.current.removeChild(resultContainerRef.current.childNodes[0])\n    }\n\n    // Generate meme image from the content of 'content' div\n    domtoimage.toPng(contentContainerRef.current).then((dataUrl) => {\n      // Create new image\n      const img = new Image()\n\n      // Use url of the generated image as src\n      img.src = dataUrl\n\n      axios.post('http://localhost:3100/makememe', {\n        firstName: 'Finn',\n        lastName: 'Williams'\n      })\n      .then((response) => {\n        const returnedData = response.data;\n        console.log(returnedData);\n      }, (error) => {\n        console.log(error);\n      });\n\n      // Append new image to DOM\n      resultContainerRef.current.appendChild(img)\n\n      // Update state for isMemeGenerated\n      setIsMemeGenerated(true)\n    })\n  }\n\n  // Handle resetting the meme generator/removing existing pictures\n  function handleMemeReset() {\n    // Remove existing child node inside result container (generated meme image)\n    resultContainerRef.current.removeChild(resultContainerRef.current.childNodes[0])\n\n    // Update state for isMemeGenerated\n    setIsMemeGenerated(false)\n  }\n\n  // Fetch images from https://api.imgflip.com/get_memes when app mounts\n  React.useEffect(() => {\n    // Call fetchImage method\n    fetchImage()\n  }, [])\n\n  return (\n    <div className=\"App\">\n      {/* Add Form component */}\n      <Form\n        textTop={textTop}\n        textBottom={textBottom}\n        handleImageInputChange={handleImageInputChange}\n        handleInputChange={handleInputChange}\n        handleImageChange={handleImageChange}\n        handleMemeGeneration={handleMemeGeneration}\n        handleMemeReset={handleMemeReset}\n        isMemeGenerated={isMemeGenerated}\n      />\n\n      {/* Add Content component */}\n      <Content\n        activeImage={activeImage}\n        contentContainerRef={contentContainerRef}\n        textBottom={textBottom}\n        textTop={textTop}\n      />\n\n      {/* Add Result component */}\n      <Result resultContainerRef={resultContainerRef} />\n    </div>\n  )\n}\n\n// Render the App in the DOM\nconst rootElement = document.getElementById('root')\nrender(<App />, rootElement)\n"]},"metadata":{},"sourceType":"module"}